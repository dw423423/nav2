amcl:
  ros__parameters:
    use_sim_time: false
    alpha1: 0.1                    # 旋转误差对旋转的敏感度
    alpha2: 0.1                    # 平移误差对旋转的敏感度
    alpha3: 0.1                    # 平移误差对平移的敏感度
    alpha4: 0.1                    # 旋转误差对平移的敏感度
    alpha5: 0.0                    # 综合误差因子
    base_frame_id: "base_footprint"
    beam_skip_distance: 0.5        # 跳过短距离激光束
    beam_skip_error_threshold: 0.9 # 激光束跳过的错误阈值
    beam_skip_threshold: 0.3       # 激光束跳过阈值
    do_beamskip: true              # 启用激光束跳过功能
    global_frame_id: "map"
    lambda_short: 0.1              # 指数分布参数
    set_initial_pose: true         # 设置初始位姿
    initial_pose_x: 0.0            # 初始X位置
    initial_pose_y: 0.0            # 初始Y位置
    initial_pose_a: 0.0            # 初始角度
    laser_likelihood_max_dist: 2.0 # 最大似然距离
    laser_max_range: 20.0          # 激光最大范围（降低以避免远距离噪声）
    laser_min_range: 0.0           # 激光最小范围
    laser_model_type: "likelihood_field"
    max_beams: 60                  # 激光束的最大数量
    max_particles: 3000            # 最大粒子数
    min_particles: 1000            # 最小粒子数
    odom_frame_id: "odom"
    pf_err: 0.05                   # 粒子滤波器平均误差
    pf_z: 0.99                     # 置信度
    recovery_alpha_fast: 0.0       # 快速恢复参数
    recovery_alpha_slow: 0.0       # 慢速恢复参数
    resample_interval: 1           # 重采样间隔
    robot_model_type: "nav2_amcl::DifferentialMotionModel"
    save_pose_rate: 0.5            # 保存位姿率
    sigma_hit: 0.2                 # 高斯模型标准差
    tf_broadcast: true             # 是否广播TF变换
    transform_tolerance: 0.2       # 变换容差
    update_min_a: 0.05             # 角度更新最小阈值
    update_min_d: 0.1              # 距离更新最小阈值
    z_hit: 0.5                     # 高斯模型权重
    z_max: 0.05                    # 最大测量概率
    z_rand: 0.5                    # 随机测量概率
    z_short: 0.05                  # 短距离测量概率
    always_reset_initial_pose: false
    scan_topic: scan
    map_topic: map
    use_map_topic: true
    first_map_only: true
    # 添加正确的粒子可视化参数
    always_publish_transform: true
    publish_pose_rate: 1.0         # 发布位姿的频率
    publish_tf: true               # 发布TF变换
    # 粒子云发布参数
    gui_publish_rate: 50.0         # 粒子发布率 (设置一个正值以启用)
    save_pose_rate: 0.5            # 保存位姿率
    recovery_alpha_slow: 0.0
    recovery_alpha_fast: 0.0
    # 重要：启用粒子云发布
    particle_cloud_topic: "particle_cloud"
# amcl:
#   ros__parameters:
#     enabled: true
#     use_sim_time: false
#     base_frame_id: "base_footprint"
#     global_frame_id: "map"
#     odom_frame_id: "odom"
#     tf_broadcast: true
#     allow_unknown: true
#     initial_pose_x: 0.0
#     initial_pose_y: 0.0
#     initial_pose_a: 0.0
#     min_particles: 500
#     max_particles: 4000
#     laser_max_range: 10.0
#     laser_use_inf: true
#     alpha1: 0.2
#     alpha2: 0.2
#     alpha3: 0.2
#     alpha4: 0.2
#     alpha5: 0.2
#     set_initial_pose: true
#     first_map_only: false
#     use_map_topic: true

